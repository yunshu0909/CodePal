# DECISION_LOG - 2026-02-18（V0.9 新建项目自动化测试）

## 背景
- 目标：按 V0.7 的正式版标准，为 V0.9 新建项目能力补齐“后端 + 前端 + Electron”完整自动化闭环。
- 约束：沿用现有 Electron 工程结构，不引入新的测试框架。

## 决策

### 1. 测试分层改为“前后端分离脚本”
- 决策：
  - 新增 `test:v09:backend`
  - 新增 `test:v09:integration`
  - `test:v09` 由两段串行组成
- 原因：
  - 后端失败和前端失败可快速归因，不互相噪音。

### 2. 页面增加 `data-testid` 作为稳定锚点
- 决策：
  - 为项目名、路径、Git 卡片、模板 pills、覆盖开关、创建按钮、结果区补测试标识。
- 原因：
  - 降低文案/样式调整对自动化测试的脆弱性。

### 3. 覆盖开关前置到页面参数层
- 决策：
  - 新增 UI 覆盖开关，透传 `overwrite` 到 validate/execute。
- 原因：
  - 满足“冲突不覆盖/覆盖成功”两条主流程自动化验证。

### 4. E2E 中 Git 相关用例按环境条件跳过
- 决策：
  - root Git 用例在无 Git 环境下执行 `skip`，不误判主链路。
- 原因：
  - CI/本地环境可能没有 Git，可避免环境噪音导致阻断。

## 备选方案与取舍
- 方案 A：仅做后端测试，不做 E2E。
  - 放弃原因：无法覆盖真实 Electron 落盘行为。
- 方案 B：保留单一 `test:v09` 配置跑全量。
  - 放弃原因：失败定位慢，不利于分阶段回归。
