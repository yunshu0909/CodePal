## 注释规范

### 必须写注释的地方

| 位置 | 格式 | 要求 |
|------|------|------|
| 文件顶部 | `/** */` | 模块名称 + 职责描述（bullet points）+ `@module` |
| 导出函数 | `/** */` | 功能描述 + `@param` + `@returns`，复杂函数加执行步骤 |
| 复杂逻辑 | `//` | 说明"为什么"，而非"做什么" |
| React useState | `//` | 每个 state 的用途 |

### 注释力度

**文件头示例**：
```javascript
/**
 * 数据存储模块
 *
 * 负责：
 * - 扫描工具目录获取技能
 * - 中央仓库的导入/导出
 * - 推送状态管理
 *
 * @module store/data
 */
```

**函数示例**：
```javascript
/**
 * 从工具导入技能到中央仓库
 * @param {string[]} toolIds - 工具 ID 列表
 * @returns {Promise<{success: boolean, copiedCount: number}>}
 */
async importSkills(toolIds) {
  // 1. 确保目录存在
  // 2. 扫描并复制技能
  // 3. 更新配置
}
```

**行内示例**：
```javascript
// 静默处理：用户可能手动删除了文件
if (error === 'SOURCE_NOT_FOUND') {
  count++ // 已删除视为成功
}
```

### 不写废话

❌ `// 设置 x 为 1` `// 遍历数组` `// 如果成功`

✅ `// 统计成功导入的技能数` `// 倒序遍历避免索引错乱` `// 部分成功也算成功`

## 文件规范说明

### 1) 文件体量红线（强制）

> 目标：避免超大文件导致维护成本失控。  
> 说明：这里不再区分“建议上限”，只保留必须执行的红线。

| 维度 | 红线 | 触发动作 |
|------|------|----------|
| 单文件 | 800 行 | 超线后禁止继续叠加功能，必须拆分 |
| 页面组件文件 | 650 行 | 超线后优先抽离 hooks/子组件，再继续迭代 |
| 单个函数 | 120 行 | 必须拆步骤，拆为多个函数 |
| 单组件 `useState` 数 | 12 个 | 必须重构状态结构（`useReducer`/自定义 hook） |
| 单文件 IPC handler 数 | 15 个 | 禁止新增 handler 到该文件，必须按领域拆分 |